
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>How to reset your application's states using Angular UI-Router</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=a9cba58359">
    <link rel="stylesheet" type="text/css" href="../assets/css/atom-one-light.css?v=a9cba58359">
    <link href="https://fonts.googleapis.com/css?family=Lato:100,100i,300,300i,400,400i,700,700i,900,900i" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">

    <link rel="canonical" href="index.html">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="amp/index.html">
    
    <meta property="og:site_name" content="JPinto">
    <meta property="og:type" content="article">
    <meta property="og:title" content="How to reset your application's states using Angular UI-Router">
    <meta property="og:description" content="When it comes to develop a single page app that requires a good client-side router using AngularJS, the de-facto solution for many developers is to use Angular UI-Router. Among its features there's an important concept called states, which is the key mechanism that this router uses to manage routing in">
    <meta property="og:url" content="http://localhost:2368/how-to-reset-your-applications-states-using-angular-ui-router/">
    <meta property="og:image" content="http://localhost:2368/content/images/2016/11/how-to-reset-your-applications-states-using-angular-ui-router/cover.jpg">
    <meta property="article:published_time" content="2016-11-03T15:27:00.000Z">
    <meta property="article:modified_time" content="2017-03-30T17:17:30.000Z">
    <meta property="article:tag" content="technology">
    <meta property="article:tag" content="angularjs">
    <meta property="article:tag" content="javascript">
    <meta property="article:tag" content="programming">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="How to reset your application's states using Angular UI-Router">
    <meta name="twitter:description" content="When it comes to develop a single page app that requires a good client-side router using AngularJS, the de-facto solution for many developers is to use Angular UI-Router. Among its features there's an important concept called states, which is the key mechanism that this router uses to manage routing in">
    <meta name="twitter:url" content="http://localhost:2368/how-to-reset-your-applications-states-using-angular-ui-router/">
    <meta name="twitter:image" content="http://localhost:2368/content/images/2016/11/how-to-reset-your-applications-states-using-angular-ui-router/cover.jpg">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Juan Pablo Pinto">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="technology, angularjs, javascript, programming">
    <meta property="og:image:width" content="1280">
    <meta property="og:image:height" content="602">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "JPinto",
        "logo": "http://localhost:2368/content/images/2017/03/avatar_white.svg"
    },
    "author": {
        "@type": "Person",
        "name": "Juan Pablo Pinto",
        "image": {
            "@type": "ImageObject",
            "url": "http://localhost:2368/content/images/2017/03/boba.png",
            "width": 456,
            "height": 512
        },
        "url": "http://localhost:2368/author/jpinto/",
        "sameAs": [],
        "description": "Hi, I&#x27;m a Full Stack Web Developer and Electronics Engineer. Learn more &lt;a href&#x3D;&quot;/about/&quot;&gt;about me&lt;/a&gt; or &lt;a href&#x3D;&quot;mailto:juan.pinto108@gmail.com&quot;&gt;email me&lt;/a&gt; with any questions and comments."
    },
    "headline": "How to reset your application&#x27;s states using Angular UI-Router",
    "url": "http://localhost:2368/how-to-reset-your-applications-states-using-angular-ui-router/",
    "datePublished": "2016-11-03T15:27:00.000Z",
    "dateModified": "2017-03-30T17:17:30.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:2368/content/images/2016/11/how-to-reset-your-applications-states-using-angular-ui-router/cover.jpg",
        "width": 1280,
        "height": 602
    },
    "keywords": "technology, angularjs, javascript, programming",
    "description": "When it comes to develop a single page app that requires a good client-side router using AngularJS, the de-facto solution for many developers is to use Angular UI-Router. Among its features there&#x27;s an important concept called states, which is the key mechanism that this router uses to manage routing in",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:2368"
    }
}
    </script>

    <meta name="generator" content="Ghost 0.11">
    <link rel="alternate" type="application/rss+xml" title="JPinto" href="../rss/index.html">
    <script>var disqus="juanpablopinto";</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-61907028-1', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body class="post-template tag-technology tag-angularjs tag-javascript tag-programming nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="index.html#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
            <li class="nav-home"><a href="../">Home</a></li>
            <li class="nav-about"><a href="../about/">About</a></li>
    </ul>
        <a class="subscribe-button icon-feed" href="../rss/index.rss">Subscribe</a>
    <div class="nav-icons">
      <a class="mail" href="mailto:juan.pinto108@gmail.com"><i class="icon-mail"></i></a>
      <a class="github" target="_blank" href="https://github.com/jpinto7"><i class="icon-github"></i></a>
      <a class="linkedin" target="_blank" href="https://www.linkedin.com/in/juanpablopinto"><i class="icon-linkedin"></i></a>
      <a class="facebook" target="_blank" href="https://www.facebook.com/juanpablo.pintosantana"><i class="icon-facebook"></i></a>
    </div>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        


<header class="main-header post-head has-cover" style="background-image: url(../content/images/2016/11/how-to-reset-your-applications-states-using-angular-ui-router/cover.jpg)">
    <div class="main-header-background-square"></div>
    <nav class="main-nav overlay clearfix">
        <a class="blog-logo" href="../"><img src="../content/images/2017/03/avatar_white.svg" alt="JPinto"></a>
            <a class="menu-button icon-menu" href="index.html#"><span class="word">Menu</span></a>
    </nav>
</header>

<main class="content" role="main">
    <article class="post tag-technology tag-angularjs tag-javascript tag-programming">

        <header class="post-header">
            <h1 class="post-title">How to reset your application's states using Angular UI-Router</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2016-11-03">03 November 2016</time>  on <a href="../tag/technology/">technology</a>, <a href="../tag/angularjs/">angularjs</a>, <a href="../tag/javascript/">javascript</a>, <a href="../tag/programming/">programming</a>
            </section>
        </header>

        <section class="post-content">
            <p>When it comes to develop a single page app that requires a good client-side router using AngularJS, the de-facto solution for many developers is to use <a href="https://ui-router.github.io/">Angular UI-Router</a>.</p>

<p>Among its features there's an important concept called <strong>states</strong>, which is the key mechanism that this router uses to manage routing in an application. As a result, the application behaves like a state machine. Each state is to be considered as a "place" in the application in terms of UI (the look and feel) and navigation (URL, query parameters and so on).</p>

<p>To define or register a state, first we need to inject the $state provider in the config phase function of an AngularJS application and use its state method like this (using a particular stateName and stateConfig object):</p>

<pre><code class="language-js">$stateProvider.state('home', {
    templateUrl: 'home.html',
    controller: 'HomeController',
    controllerAs: 'homeCtrl'
});
</code></pre>

<p>As you can see, the $state provider allows us to easily declare the states of an application. However, as far as I'm concerned, there's no easy way to reset the application's states. The idea for this came to me when I was developing an application that required that upon user logout, all the states were cleaned up and some default states were created. </p>

<p>Before moving to the actual steps of the solution, If you haven't added the UI-Router package to your project, you can do it with bower (make sure it's the latest stable version, which by the time of this post is 0.3.1):</p>

<pre><code class="language-plain">bower install --save angular-ui-router#0.3.1  
</code></pre>

<p>Or with npm:</p>

<pre><code class="language-plain">npm install --save angular-ui-router  
</code></pre>

<p>Now to the meat and potatoes of this post. What I ended up doing was this:</p>

<ul>
<li><p>Open the angular-ui-router.js file (it's the unminified version) in your favorite text editor.</p></li>
<li><p>Add an init method inside the $StateProvider function. This function defines the $state provider in the ui.router.state module (look around the line 2208):</p></li>
</ul>

<pre><code class="language-js">function $StateProvider($urlRouterProvider, $urlMatcherFactory) {  
    var root, states = {}, $state, queue = {}, abstractKey = 'abstract';
    this.init = function () {
        states = {};
        queue = {};
    };
...
}
</code></pre>

<ul>
<li>Add an init method inside the $UrlRouterProvider function. This function defines the $urlRouter provider in the ui.router.router module (look around the line 1771):</li>
</ul>

<pre><code class="language-js">function $UrlRouterProvider($locationProvider, $urlMatcherFactory) {  
    var rules = [], otherwise = null, interceptDeferred = false, listener;
    this.init = function () {
        rules = [];
        otherwise = null;
    };
...
}
</code></pre>

<ul>
<li><p>With those two changes, save the file. Minify it if you want a production ready file to include in your project.</p></li>
<li><p>Now you can call the init method using the $state provider and the $urlRouter provider like this (I'm assuming they have been injected properly wherever they're used):</p></li>
</ul>

<pre><code class="language-js">$stateProvider.init();
$urlRouterProvider.init();
</code></pre>

<p>As you can see, with a few changes in Angular UI-Router's source code, you now have the ability to reset the states of your application. Don't forget to register some default states (if applicable) after calling the init method to keep the application's navigability. I hope you've found this post helpful.</p>

<p>Happy coding!</p>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="../author/jpinto/" style="background-image: url(../content/images/2017/03/boba.png)"><span class="hidden">Juan Pablo Pinto's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="../author/jpinto/">Juan Pablo Pinto</a></h4>

                    <p>Hi, I'm a Full Stack Web Developer and Electronics Engineer. Learn more <a href="../about/">about me</a> or <a href="mailto:juan.pinto108@gmail.com">email me</a> with any questions and comments.</p>
                <div class="author-meta">
                    <span class="author-location icon-location">Guatemala City, Guatemala</span>
                    
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=How%20to%20reset%20your%20application's%20states%20using%20Angular%20UI-Router&amp;url=http://localhost:2368/how-to-reset-your-applications-states-using-angular-ui-router/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:2368/how-to-reset-your-applications-states-using-angular-ui-router/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://localhost:2368/how-to-reset-your-applications-states-using-angular-ui-router/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>


        </footer>
        <div id="disqus_thread"></div>
    </article>
</main>

<aside class="read-next">
    <a class="read-next-story prev " style="background-image: url(../content/images/2016/05/how-to-update-your-ghost-blog/cover.jpg)" href="../how-to-update-your-ghost-blog/">
        <section class="post">
            <h2>How to update your Ghost blog</h2>
            <p>Since this is the first time I'm updating my Ghost-based blog, I want to share the process I followed…</p>
        </section>
    </a>
</aside>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="../">JPinto</a> © 2017</section>
            <section class="poweredby">Proudly published with <a href="https://ghost.org/">Ghost</a></section>
        </footer>

    </div>

    <script type="text/javascript" src="../assets/js/jquery.js?v=a9cba58359"></script>
    
    <script type="text/javascript" src="../assets/js/highlight.pack.js?v=a9cba58359"></script>
    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=a9cba58359"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=a9cba58359"></script>
    <script src="https://cdn.jsdelivr.net/mobile-detect.js/1.3.3/mobile-detect.min.js"></script>
    <script src="https://npmcdn.com/imagesloaded@4.1/imagesloaded.pkgd.min.js"></script>

</body>
